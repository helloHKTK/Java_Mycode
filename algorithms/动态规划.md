## 动态规划 (dynamic programming）:将一个问题拆成几个子问题，分别求解这些子问题，即可推断出大问题的解



出自： https://www.zhihu.com/question/23995189 

先来看看生活中经常遇到的事吧——假设您是个土豪，身上带了足够的1、5、10、20、50、100元面值的钞票。现在您的目标是凑出某个金额w，**需要用到尽量少的钞票。**

　　依据生活经验，我们显然可以采取这样的策略：能用100的就尽量用100的，否则尽量用50的……依次类推。在这种策略下，666=6×100+1×50+1×10+1×5+1×1，共使用了10张钞票。

　　这种策略称为“**贪心**”：假设我们面对的局面是“需要凑出w”，**贪心策略会尽快让w变得更小**。能让w少100就尽量让它少100，这样我们接下来面对的局面就是凑出w-100。长期的生活经验表明，贪心策略是正确的。

　　但是，如果我们换一组钞票的面值，贪心策略就也许不成立了。如果一个奇葩国家的钞票面额分别是1、5、11，那么我们在凑出15的时候，贪心策略会出错：
　　15=1×11+4×1    （贪心策略使用了5张钞票）
　　15=3×5               （正确的策略，只用3张钞票）
　　为什么会这样呢？贪心策略错在了哪里？

　　**鼠目寸光。**
　　刚刚已经说过，贪心策略的纲领是：“尽量使接下来面对的w更小”。这样，贪心策略在w=15的局面时，会优先使用11来把w降到4；但是在这个问题中，凑出4的代价是很高的，必须使用4×1。如果使用了5，w会降为10，虽然没有4那么小，但是凑出10只需要两张5元。
　　在这里我们发现，贪心是一种**只考虑眼前情况**的策略。

　　那么，现在我们怎样才能避免鼠目寸光呢？

　　如果直接暴力枚举凑出w的方案，明显复杂度过高。太多种方法可以凑出w了，枚举它们的时间是不可承受的。我们现在来尝试找一下性质。



　　重新分析刚刚的例子。w=15时，我们如果取11，接下来就面对w=4的情况；如果取5，则接下来面对w=10的情况。我们发现这些问题都有相同的形式：“给定w，凑出w所用的最少钞票是多少张？”接下来，我们用f(n)来表示“凑出n所需的最少钞票数量”。

　　那么，如果我们取了11，最后的代价（用掉的钞票总数）是多少呢？
　　明显![[公式]](https://www.zhihu.com/equation?tex=%5Ctext%7Bcost%7D+%3D+f%284%29+%2B+1+%3D+4+%2B+1+%3D+5) ，它的意义是：利用11来凑出15，付出的代价等于f(4)加上自己这一张钞票。现在我们暂时不管f(4)怎么求出来。
　　依次类推，马上可以知道：如果我们用5来凑出15，cost就是![[公式]](https://www.zhihu.com/equation?tex=f%2810%29+%2B+1+%3D+2+%2B+1+%3D+3) 。

　　那么，现在w=15的时候，我们该取那种钞票呢？**当然是各种方案中，cost值最低的那一个**！

　　- 取11：![[公式]](https://www.zhihu.com/equation?tex=%5Ctext%7Bcost%7D%3Df%284%29%2B1%3D4%2B1%3D5)
　　- 取5：  ![[公式]](https://www.zhihu.com/equation?tex=%5Ctext%7Bcost%7D%3Df%2810%29%2B1%3D2%2B1%3D3)
　　- 取1：  ![[公式]](https://www.zhihu.com/equation?tex=%5Ctext%7Bcost%7D%3Df%2814%29%2B1%3D4%2B1%3D5)

　　显而易见，cost值最低的是取5的方案。**我们通过上面三个式子，做出了正确的决策**！

　　这给了我们一个**至关重要**的启示—— ![[公式]](https://www.zhihu.com/equation?tex=f%28n%29) 只与 ![[公式]](https://www.zhihu.com/equation?tex=f%28n-1%29%2Cf%28n-5%29%2Cf%28n-11%29) 相关；更确切地说：

![[公式]](https://www.zhihu.com/equation?tex=f%28n%29%3D%5Cmin%5C%7Bf%28n-1%29%2Cf%28n-5%29%2Cf%28n-11%29%5C%7D%2B1)

　　这个式子是非常激动人心的。我们要求出f(n)，只需要求出几个更小的f值；既然如此，我们从小到大把所有的f(i)求出来不就好了？注意一下边界情况即可。代码如下：

![img](https://pic2.zhimg.com/50/v2-6a5ba74fb90968533ece429ed329c903_hd.jpg)![img](https://pic2.zhimg.com/80/v2-6a5ba74fb90968533ece429ed329c903_hd.jpg)

　　我们以 ![[公式]](https://www.zhihu.com/equation?tex=O%28n%29) 的复杂度解决了这个问题。现在回过头来，我们看看它的原理：

　　- ![[公式]](https://www.zhihu.com/equation?tex=f%28n%29) 只与![[公式]](https://www.zhihu.com/equation?tex=f%28n-1%29%2Cf%28n-5%29%2Cf%28n-11%29)的**值**相关。
　　-  我们只关心 ![[公式]](https://www.zhihu.com/equation?tex=f%28w%29) 的**值**，不关心是怎么凑出w的。

　　这两个事实，保证了我们做法的正确性。它比起贪心策略，会分别算出取1、5、11的代价，从而做出一个正确决策，这样就避免掉了“鼠目寸光”！

　　它与暴力的区别在哪里？我们的暴力枚举了“使用的硬币”，然而这属于冗余信息。我们要的是答案，根本不关心这个答案是怎么凑出来的。譬如，要求出f(15)，只需要知道f(14),f(10),f(4)的值。**其他信息并不需要。**我们舍弃了冗余信息。我们只记录了对解决问题有帮助的信息——f(n).

　　我们能这样干，取决于问题的性质：求出f(n)，只需要知道几个更小的f(c)。**我们将求解f(c)称作求解f(n)的“子问题”。**



　　**这就是DP**（动态规划，dynamic programming）.

　　**将一个问题拆成几个子问题，分别求解这些子问题，即可推断出大问题的解**。